/* Chaos Control v3 â€” styles */
:root{
  --bg: #faf9f6;
  --panel: #f3f1ee;
  --text: #1f2937;
  --muted: #6b7280;
  --primary: #137a7f;
  --high: #c44141;
  --medium: #c28b2d;
  --low: #597fa3;
  --card: #ffffff;
}
.dark:root{
  --bg: #1d1f24;
  --panel: #2a2d33;
  --text: #e5e7eb;
  --muted: #9ca3af;
  --primary: #18a0a6;
  --high: #ff6b6b;
  --medium: #e0aa52;
  --low: #7aa4cf;
  --card: #262a31;
}
*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:var(--text);font:14px/1.4 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial}
.wrap{max-width:1400px;margin:0 auto;padding:16px;}
.hdr{display:flex;gap:12px;align-items:center;justify-content:space-between;position:relative;margin-bottom:12px;}
.title{font-weight:800;font-size:22px;position:relative;letter-spacing:.3px}
.word-chaos{position:relative;display:inline-block;padding:.1em .2em}
.word-chaos .bomb-bg{
  position:absolute;inset:-4px -10px -6px -10px;z-index:-1;
  background:
    radial-gradient(40% 60% at 20% 30%, rgba(239,68,68,.25), transparent 60%),
    radial-gradient(40% 60% at 70% 60%, rgba(168,85,247,.25), transparent 60%),
    radial-gradient(60% 40% at 40% 80%, rgba(16,185,129,.25), transparent 60%);
  filter: blur(10px) saturate(90%);
  border-radius:18px;
}
.hdr-tools{display:flex;gap:6px;align-items:center;flex-wrap:wrap}
.search{padding:8px 10px;border-radius:10px;border:1px solid #d1d5db;min-width:260px;background:var(--card);color:var(--text)}
.btn{padding:8px 10px;border-radius:10px;border:1px solid #d1d5db;background:var(--panel);cursor:pointer}
.btn.primary{background:var(--primary);color:#fff;border-color:transparent}
.btn.sm{padding:6px 8px;font-size:12px}
.btn.xs{padding:4px 6px;font-size:11px}
.date-picker{position:absolute;right:10px;top:44px;background:var(--card);border:1px solid #d1d5db;border-radius:12px;padding:8px;box-shadow:0 6px 20px rgba(0,0,0,.15)}
.addbar{position:sticky;top:0;z-index:5;background:linear-gradient(to bottom, var(--panel), transparent);padding:8px;border-radius:12px;margin-bottom:12px;border:1px solid #d1d5db}
.addbar-title{width:100%;padding:10px 12px;border-radius:10px;border:1px solid #d1d5db;background:var(--card);margin-bottom:8px}
.addbar-row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.w80{width:80px}.w120{width:120px}.w140{width:140px}
.seg{display:inline-flex;gap:8px;align-items:center;background:var(--card);padding:6px 8px;border-radius:999px;border:1px solid #d1d5db}
.layout{display:grid;grid-template-columns:320px 1fr;gap:12px}
.left .panel{background:var(--panel);border-radius:14px;padding:10px;border:1px solid #d1d5db;margin-bottom:12px}
.panel-h{font-weight:700;margin-bottom:8px}
.empty{color:var(--muted)}
.main .week{display:grid;grid-template-columns:repeat(7,1fr);gap:10px}
.daycol{background:var(--panel);border:1px solid #d1d5db;border-radius:14px;overflow:hidden;position:relative}
.daycol.today{outline:2px solid var(--primary)}
.daycol.holiday{background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,0)), var(--panel);}
.holiday-name{font-size:12px;color:var(--muted);padding:4px 8px}
.dayhdr{display:flex;align-items:center;gap:8px;padding:8px;background:var(--card);border-bottom:1px solid #d1d5db}
.dname{font-weight:700;width:48px}
.dnum{font-weight:800;font-size:18px}
.cap{flex:1;height:6px;background:#e5e7eb;border-radius:6px;overflow:hidden}
.cap span{display:block;height:6px;background:var(--primary)}
.busy{padding:8px;display:flex;flex-direction:column;gap:8px}
.busyitem{border:1px dashed #cbd5e1;border-radius:12px;padding:8px}
.busyitem.high .ttl{color:var(--high);font-weight:800}
.busyitem.missed{border-style:dashed;animation:missed 1.2s steps(2,end) infinite}
@keyframes missed{50%{opacity:.8}}
.unsched{border-top:1px dashed #d1d5db;padding:8px}
.unsched-h{font-size:12px;color:var(--muted);margin-bottom:6px}
.taskcard{background:var(--card);border:1px solid #d1d5db;border-radius:12px;padding:8px;margin-bottom:8px}
.taskcard.high .ttl{color:var(--high);font-weight:800}
.taskcard.missed{border-style:dashed}
.row{display:flex;gap:8px;align-items:center;justify-content:space-between}
.row.right{justify-content:flex-end}
.chk{display:inline-flex;gap:6px;align-items:center}
.ttl{font-weight:600}
.meta{display:flex;gap:8px;color:var(--muted);font-size:12px}
.badge{font-size:11px;background:#fee2e2;color:#991b1b;border-radius:999px;padding:2px 6px}
.orig{font-size:12px;color:var(--muted);margin-top:4px}
.toast{position:fixed;right:16px;bottom:16px;background:var(--card);border:1px solid #d1d5db;border-radius:14px;padding:10px 12px;box-shadow:0 10px 30px rgba(0,0,0,.2);display:flex;gap:10px;align-items:center;cursor:pointer;z-index:50}
.toast .star{font-size:20px}
.toast .msg{max-width:320px}
.ftr{margin-top:16px;color:var(--muted);text-align:center}
.confetti{position:fixed;top:-10px;width:6px;height:10px;background:linear-gradient(#ffd166,#ef476f);opacity:.9;border-radius:2px;animation:drop 2.4s ease-in forwards;z-index:60}
@keyframes drop{to{transform:translateY(100vh) rotate(540deg);opacity:.2}}
@media (max-width: 1100px){
  .layout{grid-template-columns:1fr}
  .main .week{grid-template-columns:repeat(3,1fr)}
}
@media (max-width: 740px){
  .main .week{grid-template-columns:repeat(2,1fr)}
  .hdr-tools{gap:4px}
  .search{min-width:180px}
}
